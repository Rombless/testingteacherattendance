<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Teacher Attendance Management System - Track teacher attendance, manage schedules, and generate reports">
    <meta name="keywords" content="teacher attendance, school management, attendance tracking, education">
    <meta name="author" content="Teacher Attendance System">
    
    <title>Teacher Attendance Management System</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%232563eb'><path d='M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 6.5V7.5C15 8.3 14.3 9 13.5 9S12 8.3 12 7.5V6.5L6 7V9C6 10.1 6.9 11 8 11V12.5C8 13.3 8.7 14 9.5 14S11 13.3 11 12.5V11H13V12.5C13 13.3 13.7 14 14.5 14S16 13.3 16 12.5V11C17.1 11 18 10.1 18 9M12 13.5C12 14.3 12.7 15 13.5 15S15 14.3 15 13.5V12H13V13.5M9 13.5V12H11V13.5C11 14.3 10.3 15 9.5 15S8 14.3 8 13.5Z'/></svg>">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Styles -->
    <style>
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-white flex flex-col justify-center items-center z-50">
        <div class="text-center">
            <div class="loading-spinner mx-auto mb-4"></div>
            <h2 class="text-xl font-semibold text-gray-800 mb-2">Loading Teacher Attendance System</h2>
            <p class="text-gray-600">Please wait while we prepare your dashboard...</p>
        </div>
    </div>
    
    <!-- App Container -->
    <div id="app"></div>
    
    <!-- Teacher Attendance Management System -->
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        // Icons from Lucide (using global lucide object)
        const HomeIcon = () => React.createElement('svg', { 
            className: 'w-5 h-5', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6' 
        }));
        
        const Users = () => React.createElement('svg', { 
            className: 'w-5 h-5', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a4 4 0 11-8 0 4 4 0 018 0z' 
        }));
        
        const Calendar = () => React.createElement('svg', { 
            className: 'w-5 h-5', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' 
        }));
        
        const BarChart3 = () => React.createElement('svg', { 
            className: 'w-5 h-5', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M3 13l4-4 4 4 6-6' 
        }), React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M21 21H3V3' 
        }));
        
        const Menu = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M4 6h16M4 12h16M4 18h16' 
        }));
        
        const X = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M6 18L18 6M6 6l12 12' 
        }));
        
        const Plus = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M12 4v16m8-8H4' 
        }));
        
        const Edit = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7' 
        }), React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z' 
        }));
        
        const Trash = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16' 
        }));
        
        const Clock = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('circle', { 
            cx: '12', 
            cy: '12', 
            r: '10' 
        }), React.createElement('polyline', { 
            points: '12,6 12,12 16,14' 
        }));
        
        const Download = () => React.createElement('svg', { 
            className: 'w-4 h-4', 
            fill: 'none', 
            stroke: 'currentColor', 
            viewBox: '0 0 24 24' 
        }, React.createElement('path', { 
            strokeLinecap: 'round', 
            strokeLinejoin: 'round', 
            strokeWidth: 2, 
            d: 'M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m11-4l-4 4m0 0l-4-4m4 4V3' 
        }));
        
        // Utility functions
        const formatTime = (date) => {
            return new Intl.DateTimeFormat('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            }).format(date);
        };
        
        const formatDate = (date) => {
            return new Intl.DateTimeFormat('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            }).format(date);
        };
        
        const formatDateShort = (date) => {
            return new Intl.DateTimeFormat('en-US', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            }).format(date);
        };
        
        const calculateHours = (checkIn, checkOut) => {
            if (!checkIn || !checkOut) return 0;
            const diff = new Date(checkOut) - new Date(checkIn);
            return Math.round((diff / (1000 * 60 * 60)) * 100) / 100;
        };
        
        // Custom hooks
        const useTeachers = () => {
            const [teachers, setTeachers] = useState([]);
            
            useEffect(() => {
                const stored = localStorage.getItem('teachers');
                if (stored) {
                    setTeachers(JSON.parse(stored));
                }
            }, []);
            
            const saveTeachers = useCallback((newTeachers) => {
                setTeachers(newTeachers);
                localStorage.setItem('teachers', JSON.stringify(newTeachers));
            }, []);
            
            const addTeacher = useCallback((teacher) => {
                const newTeacher = {
                    id: Date.now().toString(),
                    ...teacher,
                    createdAt: new Date().toISOString()
                };
                saveTeachers(prev => [...prev, newTeacher]);
            }, [saveTeachers]);
            
            const updateTeacher = useCallback((id, updates) => {
                saveTeachers(prev => prev.map(teacher => 
                    teacher.id === id ? { ...teacher, ...updates } : teacher
                ));
            }, [saveTeachers]);
            
            const deleteTeacher = useCallback((id) => {
                saveTeachers(prev => prev.filter(teacher => teacher.id !== id));
            }, [saveTeachers]);
            
            return { teachers, addTeacher, updateTeacher, deleteTeacher };
        };
        
        const useAttendance = () => {
            const [attendanceRecords, setAttendanceRecords] = useState([]);
            
            useEffect(() => {
                const stored = localStorage.getItem('attendanceRecords');
                if (stored) {
                    setAttendanceRecords(JSON.parse(stored));
                }
            }, []);
            
            const saveAttendance = useCallback((records) => {
                setAttendanceRecords(records);
                localStorage.setItem('attendanceRecords', JSON.stringify(records));
            }, []);
            
            const checkIn = useCallback((teacherId) => {
                const now = new Date();
                const today = formatDateShort(now);
                
                const existingRecord = attendanceRecords.find(
                    record => record.teacherId === teacherId && record.date === today
                );
                
                if (existingRecord) {
                    // Update existing record
                    saveAttendance(prev => prev.map(record => 
                        record.teacherId === teacherId && record.date === today
                            ? { ...record, checkIn: now.toISOString(), status: 'present' }
                            : record
                    ));
                } else {
                    // Create new record
                    const newRecord = {
                        id: Date.now().toString(),
                        teacherId,
                        date: today,
                        checkIn: now.toISOString(),
                        checkOut: null,
                        status: 'present',
                        hours: 0
                    };
                    saveAttendance(prev => [...prev, newRecord]);
                }
            }, [attendanceRecords, saveAttendance]);
            
            const checkOut = useCallback((teacherId) => {
                const now = new Date();
                const today = formatDateShort(now);
                
                saveAttendance(prev => prev.map(record => {
                    if (record.teacherId === teacherId && record.date === today) {
                        const hours = calculateHours(record.checkIn, now.toISOString());
                        return {
                            ...record,
                            checkOut: now.toISOString(),
                            hours,
                            status: 'present'
                        };
                    }
                    return record;
                }));
            }, [saveAttendance]);
            
            const getTodayAttendance = useCallback((teacherId) => {
                const today = formatDateShort(new Date());
                return attendanceRecords.find(
                    record => record.teacherId === teacherId && record.date === today
                );
            }, [attendanceRecords]);
            
            const getAttendanceByDate = useCallback((date) => {
                return attendanceRecords.filter(record => record.date === date);
            }, [attendanceRecords]);
            
            const getTeacherAttendance = useCallback((teacherId) => {
                return attendanceRecords.filter(record => record.teacherId === teacherId);
            }, [attendanceRecords]);
            
            return {
                attendanceRecords,
                checkIn,
                checkOut,
                getTodayAttendance,
                getAttendanceByDate,
                getTeacherAttendance
            };
        };
        
        // Components
        const Button = ({ children, onClick, variant = 'primary', size = 'md', disabled = false, className = '' }) => {
            const baseClasses = 'inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2';
            
            const variants = {
                primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
                secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500',
                outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500',
                danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500'
            };
            
            const sizes = {
                sm: 'px-3 py-1.5 text-sm',
                md: 'px-4 py-2 text-sm',
                lg: 'px-6 py-3 text-base'
            };
            
            return (
                <button
                    onClick={onClick}
                    disabled={disabled}
                    className={`${baseClasses} ${variants[variant]} ${sizes[size]} ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}
                >
                    {children}
                </button>
            );
        };
        
        const Card = ({ children, className = '' }) => (
            <div className={`bg-white rounded-lg shadow-sm border border-gray-200 ${className}`}>
                {children}
            </div>
        );
        
        const CardHeader = ({ children, className = '' }) => (
            <div className={`px-6 py-4 border-b border-gray-200 ${className}`}>
                {children}
            </div>
        );
        
        const CardContent = ({ children, className = '' }) => (
            <div className={`px-6 py-4 ${className}`}>
                {children}
            </div>
        );
        
        const Input = ({ placeholder, value, onChange, type = 'text', className = '' }) => (
            <input
                type={type}
                placeholder={placeholder}
                value={value}
                onChange={onChange}
                className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${className}`}
            />
        );
        
        const Select = ({ value, onChange, children, className = '' }) => (
            <select
                value={value}
                onChange={onChange}
                className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${className}`}
            >
                {children}
            </select>
        );
        
        // Real-time clock component
        const RealTimeClock = () => {
            const [currentTime, setCurrentTime] = useState(new Date());
            
            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                
                return () => clearInterval(interval);
            }, []);
            
            return (
                <div className="text-center">
                    <div className="text-3xl font-bold text-gray-900 mb-2">
                        {formatTime(currentTime)}
                    </div>
                    <div className="text-lg text-gray-600">
                        {formatDate(currentTime)}
                    </div>
                </div>
            );
        };
        
        // Teacher Form Component
        const TeacherForm = ({ onSubmit, onCancel, initialData = null }) => {
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                department: '',
                employeeId: '',
                phone: '',
                status: 'active',
                ...initialData
            });
            
            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit(formData);
            };
            
            const handleChange = (e) => {
                setFormData(prev => ({
                    ...prev,
                    [e.target.name]: e.target.value
                }));
            };
            
            return (
                <form onSubmit={handleSubmit} className="space-y-4">
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Teacher Name
                        </label>
                        <Input
                            name="name"
                            value={formData.name}
                            onChange={handleChange}
                            placeholder="Enter teacher's full name"
                            required
                        />
                    </div>
                    
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Email Address
                        </label>
                        <Input
                            name="email"
                            type="email"
                            value={formData.email}
                            onChange={handleChange}
                            placeholder="teacher@school.com"
                            required
                        />
                    </div>
                    
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Department
                        </label>
                        <Select
                            name="department"
                            value={formData.department}
                            onChange={handleChange}
                            required
                        >
                            <option value="">Select Department</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Science">Science</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Physical Education">Physical Education</option>
                            <option value="Art">Art</option>
                            <option value="Music">Music</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Languages">Languages</option>
                            <option value="Administration">Administration</option>
                        </Select>
                    </div>
                    
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Employee ID
                        </label>
                        <Input
                            name="employeeId"
                            value={formData.employeeId}
                            onChange={handleChange}
                            placeholder="EMP001"
                            required
                        />
                    </div>
                    
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Phone Number
                        </label>
                        <Input
                            name="phone"
                            type="tel"
                            value={formData.phone}
                            onChange={handleChange}
                            placeholder="(555) 123-4567"
                        />
                    </div>
                    
                    <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                            Status
                        </label>
                        <Select
                            name="status"
                            value={formData.status}
                            onChange={handleChange}
                        >
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </Select>
                    </div>
                    
                    <div className="flex gap-3 pt-4">
                        <Button type="submit" variant="primary">
                            {initialData ? 'Update Teacher' : 'Add Teacher'}
                        </Button>
                        <Button type="button" variant="outline" onClick={onCancel}>
                            Cancel
                        </Button>
                    </div>
                </form>
            );
        };
        
        // Teacher Card Component
        const TeacherCard = ({ teacher, onEdit, onDelete, onCheckIn, onCheckOut, todayAttendance }) => {
            const isCheckedIn = todayAttendance?.checkIn && !todayAttendance?.checkOut;
            const isCheckedOut = todayAttendance?.checkIn && todayAttendance?.checkOut;
            
            return (
                <Card className="hover:shadow-md transition-shadow">
                    <CardContent className="p-6">
                        <div className="flex justify-between items-start mb-4">
                            <div>
                                <h3 className="text-lg font-semibold text-gray-900">{teacher.name}</h3>
                                <p className="text-gray-600">{teacher.department}</p>
                                <p className="text-sm text-gray-500">ID: {teacher.employeeId}</p>
                            </div>
                            <div className="flex gap-2">
                                <Button variant="outline" size="sm" onClick={() => onEdit(teacher)}>
                                    <Edit />
                                </Button>
                                <Button variant="danger" size="sm" onClick={() => onDelete(teacher.id)}>
                                    <Trash />
                                </Button>
                            </div>
                        </div>
                        
                        <div className="space-y-2 mb-4">
                            <div className="flex items-center gap-2 text-sm">
                                <span className="text-gray-600">Email:</span>
                                <span className="text-gray-900">{teacher.email}</span>
                            </div>
                            {teacher.phone && (
                                <div className="flex items-center gap-2 text-sm">
                                    <span className="text-gray-600">Phone:</span>
                                    <span className="text-gray-900">{teacher.phone}</span>
                                </div>
                            )}
                            <div className="flex items-center gap-2 text-sm">
                                <span className="text-gray-600">Status:</span>
                                <span className={`inline-block px-2 py-1 text-xs rounded-full ${
                                    teacher.status === 'active' 
                                        ? 'bg-green-100 text-green-800' 
                                        : 'bg-red-100 text-red-800'
                                }`}>
                                    {teacher.status}
                                </span>
                            </div>
                        </div>
                        
                        {todayAttendance && (
                            <div className="border-t pt-4 mb-4">
                                <h4 className="text-sm font-medium text-gray-700 mb-2">Today's Attendance</h4>
                                <div className="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span className="text-gray-600">Check-in:</span>
                                        <div className="font-medium">
                                            {todayAttendance.checkIn ? formatTime(new Date(todayAttendance.checkIn)) : 'Not checked in'}
                                        </div>
                                    </div>
                                    <div>
                                        <span className="text-gray-600">Check-out:</span>
                                        <div className="font-medium">
                                            {todayAttendance.checkOut ? formatTime(new Date(todayAttendance.checkOut)) : 'Not checked out'}
                                        </div>
                                    </div>
                                </div>
                                {todayAttendance.hours > 0 && (
                                    <div className="mt-2 text-sm">
                                        <span className="text-gray-600">Hours worked:</span>
                                        <span className="font-medium ml-2">{todayAttendance.hours}h</span>
                                    </div>
                                )}
                            </div>
                        )}
                        
                        <div className="flex gap-2">
                            {!isCheckedIn && !isCheckedOut && (
                                <Button 
                                    variant="primary" 
                                    size="sm" 
                                    onClick={() => onCheckIn(teacher.id)}
                                    className="flex-1"
                                >
                                    <Clock className="mr-2" />
                                    Check In
                                </Button>
                            )}
                            {isCheckedIn && (
                                <Button 
                                    variant="secondary" 
                                    size="sm" 
                                    onClick={() => onCheckOut(teacher.id)}
                                    className="flex-1"
                                >
                                    <Clock className="mr-2" />
                                    Check Out
                                </Button>
                            )}
                            {isCheckedOut && (
                                <div className="flex-1 text-center py-2 bg-green-100 text-green-800 rounded-md text-sm font-medium">
                                    ✓ Completed ({todayAttendance.hours}h)
                                </div>
                            )}
                        </div>
                    </CardContent>
                </Card>
            );
        };
        
        // Navigation Component
        const Navigation = ({ currentPage, onPageChange }) => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            
            const navigationItems = [
                { key: 'dashboard', label: 'Dashboard', icon: HomeIcon },
                { key: 'teachers', label: 'Teachers', icon: Users },
                { key: 'daily-attendance', label: 'Daily Attendance', icon: Calendar },
                { key: 'individual-tracking', label: 'Individual Tracking', icon: BarChart3 },
            ];
            
            return (
                <>
                    {/* Mobile Menu Button */}
                    <div className="lg:hidden fixed top-4 left-4 z-50">
                        <Button
                            variant="outline"
                            size="sm"
                            onClick={() => setIsMenuOpen(!isMenuOpen)}
                            className="bg-white shadow-md"
                        >
                            {isMenuOpen ? <X /> : <Menu />}
                        </Button>
                    </div>
                    
                    {/* Sidebar Navigation */}
                    <div className={`fixed left-0 top-0 h-full w-64 bg-white shadow-lg border-r transform transition-transform z-40 ${
                        isMenuOpen ? 'translate-x-0' : '-translate-x-full'
                    } lg:translate-x-0`}>
                        <div className="p-6 border-b">
                            <div className="flex items-center space-x-3">
                                <div className="p-2 bg-blue-100 rounded-lg">
                                    <Users className="w-6 h-6 text-blue-600" />
                                </div>
                                <div>
                                    <h1 className="text-xl font-bold text-gray-900">Teacher Portal</h1>
                                    <p className="text-sm text-gray-600">Attendance System</p>
                                </div>
                            </div>
                        </div>
                        
                        <nav className="p-4 space-y-2">
                            {navigationItems.map((item) => (
                                <button
                                    key={item.key}
                                    onClick={() => {
                                        onPageChange(item.key);
                                        setIsMenuOpen(false);
                                    }}
                                    className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
                                        currentPage === item.key
                                            ? 'bg-blue-50 text-blue-700 border border-blue-200'
                                            : 'text-gray-700 hover:bg-gray-100'
                                    }`}
                                >
                                    <item.icon />
                                    <span className="font-medium">{item.label}</span>
                                </button>
                            ))}
                        </nav>
                        
                        <div className="absolute bottom-4 left-4 right-4">
                            <Card>
                                <CardContent className="p-4">
                                    <div className="text-center">
                                        <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                            <Users className="w-6 h-6 text-green-600" />
                                        </div>
                                        <h3 className="font-medium text-gray-900 mb-1">System Active</h3>
                                        <p className="text-xs text-gray-600">Attendance tracking enabled</p>
                                    </div>
                                </CardContent>
                            </Card>
                        </div>
                    </div>
                    
                    {/* Overlay for mobile */}
                    {isMenuOpen && (
                        <div 
                            className="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"
                            onClick={() => setIsMenuOpen(false)}
                        />
                    )}
                </>
            );
        };
        
        // Dashboard Page
        const Dashboard = ({ teachers, attendanceRecords, checkIn, checkOut, getTodayAttendance }) => {
            const [currentTime, setCurrentTime] = useState(new Date());
            
            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                
                return () => clearInterval(interval);
            }, []);
            
            const today = formatDateShort(new Date());
            const todayAttendance = attendanceRecords.filter(record => record.date === today);
            
            const presentCount = todayAttendance.filter(record => record.status === 'present').length;
            const totalTeachers = teachers.filter(teacher => teacher.status === 'active').length;
            const attendanceRate = totalTeachers > 0 ? Math.round((presentCount / totalTeachers) * 100) : 0;
            
            const totalHours = todayAttendance.reduce((sum, record) => sum + (record.hours || 0), 0);
            
            return (
                <div className="p-6 space-y-6">
                    <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-6">
                        <RealTimeClock />
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Total Teachers</p>
                                        <p className="text-2xl font-bold text-gray-900">{totalTeachers}</p>
                                    </div>
                                    <div className="p-3 bg-blue-100 rounded-full">
                                        <Users className="w-6 h-6 text-blue-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Present Today</p>
                                        <p className="text-2xl font-bold text-green-600">{presentCount}</p>
                                    </div>
                                    <div className="p-3 bg-green-100 rounded-full">
                                        <Calendar className="w-6 h-6 text-green-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Attendance Rate</p>
                                        <p className="text-2xl font-bold text-purple-600">{attendanceRate}%</p>
                                    </div>
                                    <div className="p-3 bg-purple-100 rounded-full">
                                        <BarChart3 className="w-6 h-6 text-purple-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Total Hours</p>
                                        <p className="text-2xl font-bold text-orange-600">{totalHours.toFixed(1)}h</p>
                                    </div>
                                    <div className="p-3 bg-orange-100 rounded-full">
                                        <Clock className="w-6 h-6 text-orange-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                    </div>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <Card>
                            <CardHeader>
                                <h3 className="text-lg font-semibold text-gray-900">Recent Activity</h3>
                            </CardHeader>
                            <CardContent>
                                <div className="space-y-3">
                                    {todayAttendance.slice(0, 5).map((record) => {
                                        const teacher = teachers.find(t => t.id === record.teacherId);
                                        return (
                                            <div key={record.id} className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                                <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                                    <Users className="w-5 h-5 text-blue-600" />
                                                </div>
                                                <div className="flex-1">
                                                    <p className="font-medium text-gray-900">{teacher?.name || 'Unknown Teacher'}</p>
                                                    <p className="text-sm text-gray-600">
                                                        {record.checkOut ? 'Checked out' : 'Checked in'} at {' '}
                                                        {formatTime(new Date(record.checkOut || record.checkIn))}
                                                    </p>
                                                </div>
                                                <div className={`px-2 py-1 rounded-full text-xs font-medium ${
                                                    record.checkOut ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'
                                                }`}>
                                                    {record.checkOut ? 'Complete' : 'Active'}
                                                </div>
                                            </div>
                                        );
                                    })}
                                    {todayAttendance.length === 0 && (
                                        <div className="text-center py-8 text-gray-500">
                                            No attendance records for today
                                        </div>
                                    )}
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardHeader>
                                <h3 className="text-lg font-semibold text-gray-900">Quick Actions</h3>
                            </CardHeader>
                            <CardContent>
                                <div className="space-y-4">
                                    <div className="grid grid-cols-1 gap-3">
                                        {teachers.filter(teacher => teacher.status === 'active').slice(0, 3).map((teacher) => {
                                            const todayRecord = getTodayAttendance(teacher.id);
                                            const isCheckedIn = todayRecord?.checkIn && !todayRecord?.checkOut;
                                            const isCheckedOut = todayRecord?.checkIn && todayRecord?.checkOut;
                                            
                                            return (
                                                <div key={teacher.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                    <div>
                                                        <p className="font-medium text-gray-900">{teacher.name}</p>
                                                        <p className="text-sm text-gray-600">{teacher.department}</p>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        {!isCheckedIn && !isCheckedOut && (
                                                            <Button 
                                                                variant="primary" 
                                                                size="sm" 
                                                                onClick={() => checkIn(teacher.id)}
                                                            >
                                                                Check In
                                                            </Button>
                                                        )}
                                                        {isCheckedIn && (
                                                            <Button 
                                                                variant="secondary" 
                                                                size="sm" 
                                                                onClick={() => checkOut(teacher.id)}
                                                            >
                                                                Check Out
                                                            </Button>
                                                        )}
                                                        {isCheckedOut && (
                                                            <div className="px-3 py-1 bg-green-100 text-green-800 rounded-md text-sm font-medium">
                                                                ✓ Done
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                    </div>
                </div>
            );
        };
        
        // Teachers Page
        const Teachers = ({ teachers, addTeacher, updateTeacher, deleteTeacher, checkIn, checkOut, getTodayAttendance }) => {
            const [showForm, setShowForm] = useState(false);
            const [editingTeacher, setEditingTeacher] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterDepartment, setFilterDepartment] = useState('');
            
            const filteredTeachers = teachers.filter(teacher => {
                const matchesSearch = teacher.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    teacher.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    teacher.employeeId.toLowerCase().includes(searchTerm.toLowerCase());
                const matchesDepartment = !filterDepartment || teacher.department === filterDepartment;
                return matchesSearch && matchesDepartment;
            });
            
            const departments = [...new Set(teachers.map(teacher => teacher.department))];
            
            const handleAddTeacher = (teacherData) => {
                if (editingTeacher) {
                    updateTeacher(editingTeacher.id, teacherData);
                    setEditingTeacher(null);
                } else {
                    addTeacher(teacherData);
                }
                setShowForm(false);
            };
            
            const handleEditTeacher = (teacher) => {
                setEditingTeacher(teacher);
                setShowForm(true);
            };
            
            const handleDeleteTeacher = (teacherId) => {
                if (window.confirm('Are you sure you want to delete this teacher?')) {
                    deleteTeacher(teacherId);
                }
            };
            
            return (
                <div className="p-6 space-y-6">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <div>
                            <h2 className="text-2xl font-bold text-gray-900">Teachers Management</h2>
                            <p className="text-gray-600">Manage teacher profiles and attendance</p>
                        </div>
                        <Button 
                            variant="primary" 
                            onClick={() => setShowForm(true)}
                            className="flex items-center gap-2"
                        >
                            <Plus />
                            Add Teacher
                        </Button>
                    </div>
                    
                    {/* Statistics Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Total Teachers</p>
                                        <p className="text-2xl font-bold text-gray-900">{teachers.length}</p>
                                    </div>
                                    <div className="p-3 bg-blue-100 rounded-full">
                                        <Users className="w-6 h-6 text-blue-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Active Teachers</p>
                                        <p className="text-2xl font-bold text-green-600">
                                            {teachers.filter(t => t.status === 'active').length}
                                        </p>
                                    </div>
                                    <div className="p-3 bg-green-100 rounded-full">
                                        <Users className="w-6 h-6 text-green-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Departments</p>
                                        <p className="text-2xl font-bold text-purple-600">{departments.length}</p>
                                    </div>
                                    <div className="p-3 bg-purple-100 rounded-full">
                                        <BarChart3 className="w-6 h-6 text-purple-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                    </div>
                    
                    {/* Search and Filter */}
                    <Card>
                        <CardContent className="p-6">
                            <div className="flex flex-col sm:flex-row gap-4">
                                <div className="flex-1">
                                    <Input
                                        placeholder="Search teachers by name, email, or ID..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>
                                <div className="sm:w-64">
                                    <Select
                                        value={filterDepartment}
                                        onChange={(e) => setFilterDepartment(e.target.value)}
                                    >
                                        <option value="">All Departments</option>
                                        {departments.map(dept => (
                                            <option key={dept} value={dept}>{dept}</option>
                                        ))}
                                    </Select>
                                </div>
                            </div>
                        </CardContent>
                    </Card>
                    
                    {/* Teacher Form Modal */}
                    {showForm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
                                <div className="p-6 border-b">
                                    <h3 className="text-lg font-semibold text-gray-900">
                                        {editingTeacher ? 'Edit Teacher' : 'Add New Teacher'}
                                    </h3>
                                </div>
                                <div className="p-6">
                                    <TeacherForm
                                        initialData={editingTeacher}
                                        onSubmit={handleAddTeacher}
                                        onCancel={() => {
                                            setShowForm(false);
                                            setEditingTeacher(null);
                                        }}
                                    />
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Teachers Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filteredTeachers.map((teacher) => (
                            <TeacherCard
                                key={teacher.id}
                                teacher={teacher}
                                onEdit={handleEditTeacher}
                                onDelete={handleDeleteTeacher}
                                onCheckIn={checkIn}
                                onCheckOut={checkOut}
                                todayAttendance={getTodayAttendance(teacher.id)}
                            />
                        ))}
                    </div>
                    
                    {filteredTeachers.length === 0 && (
                        <Card>
                            <CardContent className="p-12 text-center">
                                <Users className="w-12 h-12 text-gray-400 mx-auto mb-4" />
                                <h3 className="text-lg font-medium text-gray-900 mb-2">No Teachers Found</h3>
                                <p className="text-gray-600 mb-4">
                                    {searchTerm || filterDepartment 
                                        ? 'No teachers match your search criteria.' 
                                        : 'Get started by adding your first teacher.'}
                                </p>
                                <Button variant="primary" onClick={() => setShowForm(true)}>
                                    Add Teacher
                                </Button>
                            </CardContent>
                        </Card>
                    )}
                </div>
            );
        };
        
        // Daily Attendance Page
        const DailyAttendance = ({ teachers, getAttendanceByDate }) => {
            const [selectedDate, setSelectedDate] = useState(formatDateShort(new Date()));
            
            const attendanceData = getAttendanceByDate(selectedDate);
            const activeTeachers = teachers.filter(teacher => teacher.status === 'active');
            
            // Create attendance overview for all teachers
            const attendanceOverview = activeTeachers.map(teacher => {
                const attendance = attendanceData.find(record => record.teacherId === teacher.id);
                return {
                    teacher,
                    attendance: attendance || null,
                    status: attendance ? attendance.status : 'absent'
                };
            });
            
            const presentCount = attendanceOverview.filter(item => item.status === 'present').length;
            const absentCount = attendanceOverview.filter(item => item.status === 'absent').length;
            const totalHours = attendanceData.reduce((sum, record) => sum + (record.hours || 0), 0);
            
            const exportToCSV = () => {
                const headers = ['Teacher Name', 'Department', 'Employee ID', 'Check In', 'Check Out', 'Hours', 'Status'];
                const rows = attendanceOverview.map(item => [
                    item.teacher.name,
                    item.teacher.department,
                    item.teacher.employeeId,
                    item.attendance?.checkIn ? formatTime(new Date(item.attendance.checkIn)) : 'N/A',
                    item.attendance?.checkOut ? formatTime(new Date(item.attendance.checkOut)) : 'N/A',
                    item.attendance?.hours || 0,
                    item.status
                ]);
                
                const csvContent = [headers, ...rows].map(row => row.join(',')).join('\n');
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `attendance-${selectedDate}.csv`;
                a.click();
                URL.revokeObjectURL(url);
            };
            
            return (
                <div className="p-6 space-y-6">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <div>
                            <h2 className="text-2xl font-bold text-gray-900">Daily Attendance Overview</h2>
                            <p className="text-gray-600">View attendance for all teachers on any day</p>
                        </div>
                        <Button 
                            variant="outline" 
                            onClick={exportToCSV}
                            className="flex items-center gap-2"
                        >
                            <Download />
                            Export CSV
                        </Button>
                    </div>
                    
                    {/* Date Selection */}
                    <Card>
                        <CardContent className="p-6">
                            <div className="flex items-center gap-4">
                                <label className="text-sm font-medium text-gray-700">Select Date:</label>
                                <Input
                                    type="date"
                                    value={selectedDate}
                                    onChange={(e) => setSelectedDate(e.target.value)}
                                    className="w-48"
                                />
                            </div>
                        </CardContent>
                    </Card>
                    
                    {/* Statistics */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Total Teachers</p>
                                        <p className="text-2xl font-bold text-gray-900">{activeTeachers.length}</p>
                                    </div>
                                    <div className="p-3 bg-blue-100 rounded-full">
                                        <Users className="w-6 h-6 text-blue-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Present</p>
                                        <p className="text-2xl font-bold text-green-600">{presentCount}</p>
                                    </div>
                                    <div className="p-3 bg-green-100 rounded-full">
                                        <Calendar className="w-6 h-6 text-green-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Absent</p>
                                        <p className="text-2xl font-bold text-red-600">{absentCount}</p>
                                    </div>
                                    <div className="p-3 bg-red-100 rounded-full">
                                        <X className="w-6 h-6 text-red-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                        
                        <Card>
                            <CardContent className="p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-gray-600">Total Hours</p>
                                        <p className="text-2xl font-bold text-purple-600">{totalHours.toFixed(1)}h</p>
                                    </div>
                                    <div className="p-3 bg-purple-100 rounded-full">
                                        <Clock className="w-6 h-6 text-purple-600" />
                                    </div>
                                </div>
                            </CardContent>
                        </Card>
                    </div>
                    
                    {/* Attendance Table */}
                    <Card>
                        <CardHeader>
                            <h3 className="text-lg font-semibold text-gray-900">
                                Attendance for {formatDate(new Date(selectedDate + 'T00:00:00'))}
                            </h3>
                        </CardHeader>
                        <CardContent>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b">
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Teacher</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Department</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Employee ID</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Check In</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Check Out</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Hours</th>
                                            <th className="text-left py-3 px-4 font-medium text-gray-900">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {attendanceOverview.map((item, index) => (
                                            <tr key={item.teacher.id} className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                                                <td className="py-3 px-4">
                                                    <div>
                                                        <div className="font-medium text-gray-900">{item.teacher.name}</div>
                                                        <div className="text-sm text-gray-600">{item.teacher.email}</div>
                                                    </div>
                                                </td>
                                                <td className="py-3 px-4 text-gray-900">{item.teacher.department}</td>
                                                <td className="py-3 px-4 text-gray-900">{item.teacher.employeeId}</td>
                                                <td className="py-3 px-4 text-gray-900">
                                                    {item.attendance?.checkIn ? formatTime(new Date(item.attendance.checkIn)) : '-'}
                                                </td>
                                                <td className="py-3 px-4 text-gray-900">
                                                    {item.attendance?.checkOut ? formatTime(new Date(item.attendance.checkOut)) : '-'}
                                                </td>
                                                <td className="py-3 px-4 text-gray-900">
                                                    {item.attendance?.hours ? `${item.attendance.hours}h` : '-'}
                                                </td>
                                                <td className="py-3 px-4">
                                                    <span className={`inline-block px-2 py-1 text-xs rounded-full font-medium ${
                                                        item.status === 'present'
                                                            ? 'bg-green-100 text-green-800'
                                                            : 'bg-red-100 text-red-800'
                                                    }`}>
                                                        {item.status}
                                                    </span>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                            
                            {attendanceOverview.length === 0 && (
                                <div className="text-center py-8 text-gray-500">
                                    No teachers found
                                </div>
                            )}
                        </CardContent>
                    </Card>
                </div>
            );
        };
        
        // Individual Tracking Page
        const IndividualTracking = ({ teachers, getTeacherAttendance }) => {
            const [selectedTeacher, setSelectedTeacher] = useState('');
            
            const teacherAttendance = selectedTeacher ? getTeacherAttendance(selectedTeacher) : [];
            const teacher = teachers.find(t => t.id === selectedTeacher);
            
            const totalDays = teacherAttendance.length;
            const totalHours = teacherAttendance.reduce((sum, record) => sum + (record.hours || 0), 0);
            const averageHours = totalDays > 0 ? totalHours / totalDays : 0;
            
            return (
                <div className="p-6 space-y-6">
                    <div>
                        <h2 className="text-2xl font-bold text-gray-900">Individual Tracking</h2>
                        <p className="text-gray-600">View detailed attendance history for individual teachers</p>
                    </div>
                    
                    <Card>
                        <CardContent className="p-6">
                            <div className="flex items-center gap-4">
                                <label className="text-sm font-medium text-gray-700">Select Teacher:</label>
                                <Select
                                    value={selectedTeacher}
                                    onChange={(e) => setSelectedTeacher(e.target.value)}
                                    className="w-64"
                                >
                                    <option value="">Choose a teacher...</option>
                                    {teachers.map(teacher => (
                                        <option key={teacher.id} value={teacher.id}>
                                            {teacher.name} - {teacher.department}
                                        </option>
                                    ))}
                                </Select>
                            </div>
                        </CardContent>
                    </Card>
                    
                    {selectedTeacher && teacher && (
                        <>
                            <Card>
                                <CardHeader>
                                    <h3 className="text-lg font-semibold text-gray-900">
                                        {teacher.name} - {teacher.department}
                                    </h3>
                                    <p className="text-gray-600">Employee ID: {teacher.employeeId}</p>
                                </CardHeader>
                                <CardContent>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-blue-600 mb-2">{totalDays}</div>
                                            <div className="text-sm text-gray-600">Total Days</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-green-600 mb-2">{totalHours.toFixed(1)}h</div>
                                            <div className="text-sm text-gray-600">Total Hours</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-purple-600 mb-2">{averageHours.toFixed(1)}h</div>
                                            <div className="text-sm text-gray-600">Average Hours/Day</div>
                                        </div>
                                    </div>
                                </CardContent>
                            </Card>
                            
                            <Card>
                                <CardHeader>
                                    <h3 className="text-lg font-semibold text-gray-900">Attendance History</h3>
                                </CardHeader>
                                <CardContent>
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead>
                                                <tr className="border-b">
                                                    <th className="text-left py-3 px-4 font-medium text-gray-900">Date</th>
                                                    <th className="text-left py-3 px-4 font-medium text-gray-900">Check In</th>
                                                    <th className="text-left py-3 px-4 font-medium text-gray-900">Check Out</th>
                                                    <th className="text-left py-3 px-4 font-medium text-gray-900">Hours</th>
                                                    <th className="text-left py-3 px-4 font-medium text-gray-900">Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {teacherAttendance.map((record, index) => (
                                                    <tr key={record.id} className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                                                        <td className="py-3 px-4 text-gray-900">
                                                            {formatDate(new Date(record.date + 'T00:00:00'))}
                                                        </td>
                                                        <td className="py-3 px-4 text-gray-900">
                                                            {record.checkIn ? formatTime(new Date(record.checkIn)) : '-'}
                                                        </td>
                                                        <td className="py-3 px-4 text-gray-900">
                                                            {record.checkOut ? formatTime(new Date(record.checkOut)) : '-'}
                                                        </td>
                                                        <td className="py-3 px-4 text-gray-900">
                                                            {record.hours ? `${record.hours}h` : '-'}
                                                        </td>
                                                        <td className="py-3 px-4">
                                                            <span className={`inline-block px-2 py-1 text-xs rounded-full font-medium ${
                                                                record.status === 'present'
                                                                    ? 'bg-green-100 text-green-800'
                                                                    : 'bg-red-100 text-red-800'
                                                            }`}>
                                                                {record.status}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    {teacherAttendance.length === 0 && (
                                        <div className="text-center py-8 text-gray-500">
                                            No attendance records found for this teacher
                                        </div>
                                    )}
                                </CardContent>
                            </Card>
                        </>
                    )}
                    
                    {!selectedTeacher && (
                        <Card>
                            <CardContent className="p-12 text-center">
                                <BarChart3 className="w-12 h-12 text-gray-400 mx-auto mb-4" />
                                <h3 className="text-lg font-medium text-gray-900 mb-2">Select a Teacher</h3>
                                <p className="text-gray-600">Choose a teacher from the dropdown to view their attendance history</p>
                            </CardContent>
                        </Card>
                    )}
                </div>
            );
        };
        
        // Main App Component
        const App = () => {
            const [currentPage, setCurrentPage] = useState('dashboard');
            
            // Custom hooks
            const { teachers, addTeacher, updateTeacher, deleteTeacher } = useTeachers();
            const { attendanceRecords, checkIn, checkOut, getTodayAttendance, getAttendanceByDate, getTeacherAttendance } = useAttendance();
            
            // Hide loading screen when app is ready
            useEffect(() => {
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
            }, []);
            
            const renderPage = () => {
                switch (currentPage) {
                    case 'dashboard':
                        return (
                            <Dashboard 
                                teachers={teachers}
                                attendanceRecords={attendanceRecords}
                                checkIn={checkIn}
                                checkOut={checkOut}
                                getTodayAttendance={getTodayAttendance}
                            />
                        );
                    case 'teachers':
                        return (
                            <Teachers 
                                teachers={teachers}
                                addTeacher={addTeacher}
                                updateTeacher={updateTeacher}
                                deleteTeacher={deleteTeacher}
                                checkIn={checkIn}
                                checkOut={checkOut}
                                getTodayAttendance={getTodayAttendance}
                            />
                        );
                    case 'daily-attendance':
                        return (
                            <DailyAttendance 
                                teachers={teachers}
                                getAttendanceByDate={getAttendanceByDate}
                            />
                        );
                    case 'individual-tracking':
                        return (
                            <IndividualTracking 
                                teachers={teachers}
                                getTeacherAttendance={getTeacherAttendance}
                            />
                        );
                    default:
                        return <Dashboard />;
                }
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <Navigation currentPage={currentPage} onPageChange={setCurrentPage} />
                    <div className="lg:ml-64 min-h-screen">
                        {renderPage()}
                    </div>
                </div>
            );
        };
        
        // Render the app
        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>